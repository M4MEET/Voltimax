{% sw_extends '@Storefront/storefront/layout/navigation/offcanvas/navigation.html.twig' %}

{# Override header to add language widget and reorganize layout #}
{% block utilities_offcanvas_header %}
    <div class="offcanvas-header voltimax-custom-header d-flex align-items-center justify-content-between p-3 bg-transparent border-0">
        {# Language widget - flex item #}
        <div class="voltimax-language-widget">
            {% sw_include '@Storefront/storefront/layout/header/actions/language-widget.html.twig' with {position: 'offcanvas'} %}
        </div>
        
        {# Home button - centered item #}
        <div class="voltimax-home-wrapper mx-2">
            <a href="{{ path('frontend.home.page') }}" 
               class="btn btn-outline-secondary btn-sm rounded d-inline-flex align-items-center justify-content-center px-3 py-2"
               title="{{ "general.homeLink"|trans|striptags }}">
                {% sw_icon 'solid-home-simple' %}
                <span class="ms-2 d-none d-md-inline">{{ "general.homeLink"|trans|sw_sanitize }}</span>
            </a>
        </div>
        
        {# Close button - right aligned #}
        <div class="voltimax-close-wrapper">
            <button class="btn btn-outline-secondary btn-sm rounded d-inline-flex align-items-center justify-content-center px-3 py-2 offcanvas-close js-offcanvas-close"
                    type="button"
                    data-bs-dismiss="offcanvas"
                    aria-label="{{ "general.closeMenu"|trans|striptags }}">
                {% sw_icon 'x' style { 'pack': 'solid' } %}
                <span class="ms-2">{{ 'general.offcanvasCloseMenu'|trans|sw_sanitize }}</span>
            </button>
        </div>
    </div>
{% endblock %}

{# Remove the duplicate language widget from navigation actions #}
{% block layout_navigation_offcanvas_navigation_action_language %}
    {# Empty block to prevent duplicate language widget #}
{% endblock %}

{# Keep currency widget if needed #}
{% block layout_navigation_offcanvas_navigation_action_currency %}
    {# You can keep or remove currency widget as needed #}
    {{ parent() }}
{% endblock %}