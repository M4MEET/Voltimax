{% sw_extends '@Storefront/storefront/layout/navigation/offcanvas/navigation.html.twig' %}

{# Override header to add language widget and reorganize layout #}
{% block utilities_offcanvas_header %}
    <div class="offcanvas-header d-flex align-items-center justify-content-between gap-2 p-3 bg-transparent border-0 border-bottom">
        {# Language widget - flex item #}
        <div class="d-flex align-items-center flex-fill" style="max-width: 33.33%;">
            {% sw_include '@Storefront/storefront/layout/header/actions/language-widget.html.twig' with {position: 'offcanvas'} %}
        </div>
        
        {# Home button - centered item #}
        <div class="d-flex align-items-center justify-content-center flex-fill" style="max-width: 33.33%;">
            <a href="{{ path('frontend.home.page') }}" 
               class="btn btn-outline-secondary btn-sm rounded d-flex align-items-center justify-content-center w-100"
               style="min-height: 38px;"
               title="{{ "general.homeLink"|trans|striptags }}">
                {% sw_icon 'solid-home-simple' %}
                <span class="ms-2 d-none d-lg-inline">{{ "general.homeLink"|trans|sw_sanitize }}</span>
            </a>
        </div>
        
        {# Close button - right aligned #}
        <div class="d-flex align-items-center justify-content-end flex-fill" style="max-width: 33.33%;">
            <button class="btn btn-outline-secondary btn-sm rounded d-flex align-items-center justify-content-center w-100 offcanvas-close js-offcanvas-close"
                    style="min-height: 38px;"
                    type="button"
                    data-bs-dismiss="offcanvas"
                    aria-label="{{ "general.closeMenu"|trans|striptags }}">
                {% sw_icon 'x' style { 'pack': 'solid' } %}
                <span class="ms-2 d-none d-lg-inline">{{ 'general.offcanvasCloseMenu'|trans|sw_sanitize }}</span>
            </button>
        </div>
    </div>
{% endblock %}

{# Remove the duplicate language widget from navigation actions #}
{% block layout_navigation_offcanvas_navigation_action_language %}
    {# Empty block to prevent duplicate language widget #}
{% endblock %}

{# Keep currency widget if needed #}
{% block layout_navigation_offcanvas_navigation_action_currency %}
    {# You can keep or remove currency widget as needed #}
    {{ parent() }}
{% endblock %}